# GitHub Actions ä¸‰å¹³å°æ‰“åŒ…å’Œå‘å¸ƒæ•™ç¨‹

## ğŸ“¦ è‡ªåŠ¨æ‰“åŒ…çš„ä¸‰ç§æ–¹å¼

### æ–¹å¼ 1ï¼šæ¨é€æ ‡ç­¾è§¦å‘ï¼ˆæ¨èï¼Œè‡ªåŠ¨å‘å¸ƒï¼‰

**æ­¥éª¤**ï¼š

```bash
# 1. æäº¤ä»£ç 
git add .
git commit -m "feat: æ–°åŠŸèƒ½å®Œæˆï¼Œå‡†å¤‡å‘å¸ƒ"

# 2. åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
git tag v1.0.0

# 3. æ¨é€æ ‡ç­¾åˆ° GitHub
git push origin v1.0.0
```

**æ•ˆæœ**ï¼š
- âœ… è‡ªåŠ¨åœ¨ Windowsã€macOSã€Linux ä¸Šæ„å»º
- âœ… è‡ªåŠ¨åˆ›å»º GitHub Release (v1.0.0)
- âœ… è‡ªåŠ¨ä¸Šä¼ æ‰€æœ‰å®‰è£…åŒ…åˆ° Release

**é€‚ç”¨åœºæ™¯**ï¼šæ­£å¼ç‰ˆæœ¬å‘å¸ƒ

---

### æ–¹å¼ 2ï¼šæ‰‹åŠ¨è§¦å‘ï¼ˆæµ‹è¯•ï¼Œä¸è‡ªåŠ¨å‘å¸ƒï¼‰

**æ­¥éª¤**ï¼š

1. è®¿é—® GitHub ä»“åº“
2. ç‚¹å‡» **Actions** é€‰é¡¹å¡
3. é€‰æ‹© **Release Build** workflow
4. ç‚¹å‡» **Run workflow** æŒ‰é’®
5. é€‰æ‹©åˆ†æ”¯ï¼ˆå¦‚ `main`ï¼‰
6. ç‚¹å‡» **Run workflow**

**æ•ˆæœ**ï¼š
- âœ… è‡ªåŠ¨æ„å»ºä¸‰å¹³å°å®‰è£…åŒ…
- âœ… ä¸Šä¼ ä¸º Artifactsï¼ˆä¸‹è½½åæ‰‹åŠ¨åˆ†å‘ï¼‰
- âŒ **ä¸ä¼š**è‡ªåŠ¨åˆ›å»º Release

**é€‚ç”¨åœºæ™¯**ï¼šæµ‹è¯•æ„å»ºã€å†…éƒ¨æµ‹è¯•ç‰ˆæœ¬

---

### æ–¹å¼ 3ï¼šæ¨é€ä»£ç è‡ªåŠ¨è§¦å‘ï¼ˆå¯é€‰é…ç½®ï¼‰

å¦‚æœæƒ³æ¯æ¬¡æ¨é€ `main` åˆ†æ”¯éƒ½è‡ªåŠ¨æ„å»ºï¼ˆä¸å‘å¸ƒï¼‰ï¼Œå¯ä»¥ä¿®æ”¹é…ç½®ï¼š

```yaml
on:
  push:
    branches:
      - main  # æ¨é€åˆ° main åˆ†æ”¯æ—¶è§¦å‘
    tags:
      - 'v*'  # æ¨é€æ ‡ç­¾æ—¶è§¦å‘
  workflow_dispatch:
```

---

## ğŸš€ å®Œæ•´å‘å¸ƒæµç¨‹ç¤ºä¾‹

### å‘å¸ƒ v1.0.0 ç‰ˆæœ¬

```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·
# ç¼–è¾‘ src-tauri/Cargo.toml
version = "1.0.0"

# ç¼–è¾‘ src-tauri/tauri.conf.json
"version": "1.0.0"

# 2. æäº¤ç‰ˆæœ¬æ›´æ–°
git add .
git commit -m "chore: bump version to 1.0.0"
git push

# 3. åˆ›å»ºå¹¶æ¨é€æ ‡ç­¾
git tag -a v1.0.0 -m "Release v1.0.0"
git push origin v1.0.0

# 4. ç­‰å¾…æ„å»ºå®Œæˆï¼ˆçº¦ 10-20 åˆ†é’Ÿï¼‰
# è®¿é—® GitHub Actions é¡µé¢æŸ¥çœ‹è¿›åº¦

# 5. å‘å¸ƒå®Œæˆï¼
# è®¿é—® https://github.com/ä½ çš„ç”¨æˆ·å/ccg-gateway/releases
```

---

## ğŸ“‹ æ„å»ºäº§ç‰©è¯´æ˜

### Windows
- `CCG-Gateway_1.0.0_x64-setup.exe` - NSIS å®‰è£…ç¨‹åºï¼ˆæ¨èï¼‰
- `CCG-Gateway_1.0.0_x64_en-US.msi` - MSI å®‰è£…åŒ…

### macOS
- `CCG Gateway_1.0.0_universal.dmg` - DMG é•œåƒï¼ˆæ¨èï¼‰
- `CCG Gateway.app` - åº”ç”¨åŒ…

### Linux
- `ccg-gateway_1.0.0_amd64.deb` - Debian/Ubuntu å®‰è£…åŒ…
- `ccg-gateway_1.0.0_amd64.AppImage` - é€šç”¨ AppImageï¼ˆæ¨èï¼‰

---

## â±ï¸ æ„å»ºæ—¶é—´

| å¹³å° | é¢„è®¡æ—¶é—´ |
|------|---------|
| Windows | 8-12 åˆ†é’Ÿ |
| macOS | 10-15 åˆ†é’Ÿ |
| Linux | 6-10 åˆ†é’Ÿ |
| **æ€»è®¡** | **15-20 åˆ†é’Ÿ** |

**å¹¶è¡Œæ„å»º**ï¼šä¸‰ä¸ªå¹³å°åŒæ—¶æ„å»ºï¼Œæ€»æ—¶é—´å–å†³äºæœ€æ…¢çš„å¹³å°ï¼ˆé€šå¸¸æ˜¯ macOSï¼‰ã€‚

---

## ğŸ” æŸ¥çœ‹æ„å»ºè¿›åº¦

1. è®¿é—®ä»“åº“ GitHub é¡µé¢
2. ç‚¹å‡» **Actions** é€‰é¡¹å¡
3. æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„ workflow

**å®æ—¶æ—¥å¿—**ï¼š
- âœ… ç»¿è‰²å‹¾å· = æˆåŠŸ
- ğŸ”µ è“è‰²åœ†åœˆ = è¿›è¡Œä¸­
- âŒ çº¢è‰²å‰å· = å¤±è´¥

---

## ğŸ“¥ ä¸‹è½½æ„å»ºäº§ç‰©

### æ–¹æ³• 1ï¼šä» Release ä¸‹è½½ï¼ˆæ¨èï¼‰

è®¿é—®ï¼š`https://github.com/ä½ çš„ç”¨æˆ·å/ccg-gateway/releases/latest`

é€‰æ‹©å¯¹åº”å¹³å°çš„å®‰è£…åŒ…ä¸‹è½½ã€‚

### æ–¹æ³• 2ï¼šä» Actions ä¸‹è½½ï¼ˆæ‰‹åŠ¨è§¦å‘æ—¶ï¼‰

1. è¿›å…¥å¯¹åº”çš„ workflow run
2. æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨ **Artifacts** åŒºåŸŸ
3. ä¸‹è½½å¯¹åº”å¹³å°çš„æ„å»ºäº§ç‰©ï¼š
   - `windows-x64`
   - `macos-universal`
   - `linux-x64`

---

## ğŸ” é«˜çº§ï¼šå¯ç”¨è‡ªåŠ¨æ›´æ–°ï¼ˆå¯é€‰ï¼‰

Tauri æ”¯æŒåº”ç”¨å†…è‡ªåŠ¨æ›´æ–°åŠŸèƒ½ã€‚éœ€è¦é…ç½®ç­¾åå¯†é’¥ï¼š

### 1. ç”Ÿæˆç­¾åå¯†é’¥

```bash
# å®‰è£… Tauri CLIï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
cargo install tauri-cli

# ç”Ÿæˆå¯†é’¥å¯¹
cargo tauri signer generate -w ~/.tauri/myapp.key
```

è¾“å‡ºï¼š
```
Private Key: dW50cnVzdGVkIGNvbW1lbnQ6IHJzaWduIGVuY3J5cHRlZCBzZWNyZXQga2V5...
Public Key: dW50cnVzdGVkIGNvbW1lbnQ6IG1pbmlzaWduIHB1YmxpYyBrZXk6IEU2M0Y5...
```

### 2. é…ç½® GitHub Secrets

åœ¨ GitHub ä»“åº“è®¾ç½®ä¸­æ·»åŠ ï¼š

- `TAURI_PRIVATE_KEY` = ç§é’¥å†…å®¹
- `TAURI_KEY_PASSWORD` = å¯†é’¥å¯†ç ï¼ˆå¦‚æœè®¾ç½®äº†ï¼‰

### 3. æ›´æ–° tauri.conf.json

```json
{
  "updater": {
    "active": true,
    "pubkey": "ä½ çš„å…¬é’¥"
  }
}
```

---

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šæ„å»ºå¤±è´¥ - å‰ç«¯ä¾èµ–é”™è¯¯

**åŸå› **ï¼š`package.json` ä¸­çš„ä¾èµ–æœªé”å®šæˆ– pnpm ç¼“å­˜é—®é¢˜

**è§£å†³**ï¼š
```bash
# æœ¬åœ°æµ‹è¯•æ„å»º
cd frontend
pnpm install
pnpm build
cd ../src-tauri
cargo tauri build
```

### é—®é¢˜ 2ï¼šæ„å»ºå¤±è´¥ - Rust ç¼–è¯‘é”™è¯¯

**åŸå› **ï¼šä»£ç æœ‰ç¼–è¯‘é”™è¯¯

**è§£å†³**ï¼š
```bash
# æœ¬åœ°æµ‹è¯•ç¼–è¯‘
cd src-tauri
cargo build --release
```

### é—®é¢˜ 3ï¼šRelease æœªè‡ªåŠ¨åˆ›å»º

**åŸå› **ï¼š
- æ ‡ç­¾æ ¼å¼ä¸å¯¹ï¼ˆå¿…é¡»æ˜¯ `v*`ï¼Œå¦‚ `v1.0.0`ï¼‰
- æˆ–è€…æ²¡æœ‰æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥æœ¬åœ°æ ‡ç­¾
git tag

# æ¨é€æ ‡ç­¾
git push origin v1.0.0

# æˆ–æ¨é€æ‰€æœ‰æ ‡ç­¾
git push --tags
```

---

## ğŸ“ ç‰ˆæœ¬ç®¡ç†å»ºè®®

### è¯­ä¹‰åŒ–ç‰ˆæœ¬

éµå¾ª [Semantic Versioning](https://semver.org/)ï¼š

- `v1.0.0` - ä¸»ç‰ˆæœ¬ï¼ˆé‡å¤§æ›´æ–°ï¼‰
- `v1.1.0` - æ¬¡ç‰ˆæœ¬ï¼ˆæ–°åŠŸèƒ½ï¼‰
- `v1.1.1` - è¡¥ä¸ç‰ˆæœ¬ï¼ˆBug ä¿®å¤ï¼‰

### é¢„å‘å¸ƒç‰ˆæœ¬

```bash
git tag v1.0.0-beta.1
git tag v1.0.0-rc.1
```

é…ç½®ä¸º prereleaseï¼š

```yaml
# .github/workflows/release.yml
- name: Create Release
  uses: softprops/action-gh-release@v1
  with:
    prerelease: ${{ contains(github.ref, 'beta') || contains(github.ref, 'rc') }}
```

---

## ğŸ¯ å¿«é€Ÿå‚è€ƒ

| æ“ä½œ | å‘½ä»¤ |
|------|------|
| åˆ›å»ºæ ‡ç­¾ | `git tag v1.0.0` |
| æ¨é€æ ‡ç­¾ | `git push origin v1.0.0` |
| åˆ é™¤æœ¬åœ°æ ‡ç­¾ | `git tag -d v1.0.0` |
| åˆ é™¤è¿œç¨‹æ ‡ç­¾ | `git push origin --delete v1.0.0` |
| æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ | `git tag -l` |
| æŸ¥çœ‹æ„å»ºçŠ¶æ€ | è®¿é—® GitHub Actions é¡µé¢ |

---

## âœ… æ£€æŸ¥æ¸…å•

å‘å¸ƒå‰ç¡®è®¤ï¼š

- [ ] ä»£ç å·²æäº¤å¹¶æ¨é€åˆ° GitHub
- [ ] æ›´æ–°äº† `Cargo.toml` å’Œ `tauri.conf.json` ä¸­çš„ç‰ˆæœ¬å·
- [ ] æ›´æ–°äº† `README.md` æˆ– `CHANGELOG.md`
- [ ] æœ¬åœ°æµ‹è¯•é€šè¿‡ (`cargo tauri build`)
- [ ] åˆ›å»ºå¹¶æ¨é€äº†ç‰ˆæœ¬æ ‡ç­¾
- [ ] ç­‰å¾… GitHub Actions æ„å»ºå®Œæˆï¼ˆ~15-20 åˆ†é’Ÿï¼‰
- [ ] éªŒè¯ Release é¡µé¢çš„å®‰è£…åŒ…

---

## ğŸ‰ å®Œæˆï¼

ç°åœ¨ä½ å¯ä»¥ï¼š
- âœ… ä¸€é”®æ‰“åŒ…ä¸‰å¹³å°å®‰è£…åŒ…
- âœ… è‡ªåŠ¨å‘å¸ƒåˆ° GitHub Releases
- âœ… ç”¨æˆ·ç›´æ¥ä¸‹è½½å®‰è£…

**ä¸‹ä¸€æ­¥**ï¼šæ¨é€æ ‡ç­¾ï¼Œè§è¯è‡ªåŠ¨åŒ–çš„é­”åŠ›ï¼ğŸš€
